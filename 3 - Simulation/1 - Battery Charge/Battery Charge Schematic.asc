Version 4
SHEET 1 1332 2556
WIRE -4176 -416 -4496 -416
WIRE -4032 -416 -4176 -416
WIRE -3824 -416 -4032 -416
WIRE -4176 -272 -4176 -416
WIRE -4032 -272 -4032 -416
WIRE -4176 -144 -4176 -192
WIRE -4096 -144 -4176 -144
WIRE -4032 -144 -4032 -192
WIRE -4032 -144 -4096 -144
WIRE -848 -128 -1152 -128
WIRE -784 -128 -848 -128
WIRE -576 -128 -688 -128
WIRE -464 -128 -576 -128
WIRE -352 -128 -384 -128
WIRE -288 -128 -352 -128
WIRE 32 -128 -288 -128
WIRE -4096 -112 -4096 -144
WIRE -352 -64 -352 -128
WIRE -352 -64 -496 -64
WIRE -4096 -16 -4096 -48
WIRE -4096 -16 -4176 -16
WIRE -4032 -16 -4096 -16
WIRE -3920 -16 -4032 -16
WIRE -848 0 -848 -128
WIRE -288 16 -288 -128
WIRE -768 48 -768 -80
WIRE -4176 112 -4176 -16
WIRE -4032 112 -4032 -16
WIRE -848 144 -848 80
WIRE -768 144 -768 48
WIRE -768 144 -848 144
WIRE -1152 160 -1152 -128
WIRE -4496 192 -4496 -416
WIRE -768 192 -768 144
WIRE -592 192 -768 192
WIRE -288 208 -288 96
WIRE -4176 240 -4176 192
WIRE -4096 240 -4176 240
WIRE -4032 240 -4032 192
WIRE -4032 240 -4096 240
WIRE -768 256 -768 192
WIRE -4096 272 -4096 240
WIRE -592 288 -592 192
WIRE -336 288 -592 288
WIRE -4096 352 -4096 336
WIRE -4096 352 -4176 352
WIRE -4032 352 -4096 352
WIRE -3920 352 -4032 352
WIRE -768 368 -768 336
WIRE -4176 496 -4176 352
WIRE -4032 496 -4032 352
WIRE -1152 512 -1152 240
WIRE -768 512 -768 448
WIRE -768 512 -1152 512
WIRE -288 512 -288 304
WIRE -288 512 -768 512
WIRE -128 512 -288 512
WIRE 32 512 -32 512
WIRE -768 560 -768 512
WIRE -4176 624 -4176 576
WIRE -4096 624 -4176 624
WIRE -4032 624 -4032 576
WIRE -4032 624 -4096 624
WIRE -80 624 -80 576
WIRE -4096 656 -4096 624
WIRE -4496 736 -4496 272
WIRE -4096 736 -4096 720
WIRE -4096 736 -4496 736
WIRE -3792 736 -4096 736
WIRE -80 752 -80 704
WIRE -80 752 -224 752
WIRE -960 1248 -960 1232
WIRE -960 1344 -960 1328
WIRE -816 1344 -960 1344
WIRE -960 1360 -960 1344
WIRE -560 1424 -608 1424
WIRE -432 1424 -480 1424
WIRE -1232 1456 -1280 1456
WIRE -1040 1456 -1152 1456
WIRE -960 1456 -960 1440
WIRE -816 1488 -816 1344
WIRE -720 1488 -816 1488
WIRE -608 1488 -608 1424
WIRE -608 1488 -640 1488
WIRE -512 1488 -528 1488
WIRE -1184 1520 -1200 1520
WIRE -1424 1536 -1664 1536
WIRE -1312 1536 -1344 1536
WIRE -528 1536 -528 1488
WIRE -1200 1552 -1200 1520
WIRE -608 1552 -608 1488
WIRE -560 1552 -608 1552
WIRE -1312 1568 -1312 1536
WIRE -1280 1568 -1280 1456
WIRE -1280 1568 -1312 1568
WIRE -1232 1568 -1280 1568
WIRE -432 1568 -432 1424
WIRE -432 1568 -496 1568
WIRE -128 1568 -432 1568
WIRE -1104 1584 -1168 1584
WIRE -1040 1584 -1040 1456
WIRE -1040 1584 -1104 1584
WIRE -720 1584 -1040 1584
WIRE -608 1584 -640 1584
WIRE -560 1584 -608 1584
WIRE -1280 1600 -1312 1600
WIRE -1232 1600 -1280 1600
WIRE -608 1616 -608 1584
WIRE -528 1616 -528 1600
WIRE -1424 1632 -1680 1632
WIRE -1312 1632 -1312 1600
WIRE -1312 1632 -1344 1632
WIRE -1280 1632 -1280 1600
WIRE -1200 1648 -1200 1616
WIRE -608 1712 -608 1696
WIRE -1280 1744 -1280 1712
FLAG -3824 -416 VPACK
FLAG -3920 352 V3
FLAG -576 -128 VCHG
FLAG -496 -64 VCHG_SNS
FLAG -1152 -128 PWR
FLAG -768 48 VCH_GATE
FLAG -3792 736 PACK_RTN
FLAG -3920 -16 V2
FLAG -768 560 0
FLAG 32 512 PACK_RTN
FLAG 32 -128 VPACK
FLAG -224 752 I_CHG_BASE
FLAG -1184 1520 PWR
FLAG -1200 1648 0
FLAG -528 1616 0
FLAG -512 1488 PWR
FLAG -128 1568 I_CHG_BASE
FLAG -1104 1584 I_MEAS
FLAG -608 1712 0
FLAG -960 1232 PWR
FLAG -960 1456 0
FLAG -1280 1744 0
FLAG -1664 1536 VCHG_SNS
FLAG -1680 1632 VCHG
FLAG -608 1552 I_REF
SYMBOL cap -4112 656 R0
SYMATTR InstName C3
SYMATTR Value 1
SYMBOL res -4480 176 M0
SYMATTR InstName R4
SYMATTR Value 10000000
SYMBOL voltage -768 352 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 12 0 0 0 0.5 2 2)
SYMBOL res -368 -144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 0.01
SYMBOL voltage -1152 144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 12
SYMBOL pmos -688 -80 M270
SYMATTR InstName M1
SYMATTR Value AO6407
SYMBOL res -832 -16 M0
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL res -784 240 R0
SYMATTR InstName R7
SYMATTR Value 1
SYMBOL nmos -336 208 R0
SYMATTR InstName M2
SYMATTR Value Si7336ADP
SYMBOL res -304 0 R0
SYMATTR InstName R8
SYMATTR Value 0.001
SYMBOL res -4160 480 M0
SYMATTR InstName R9
SYMATTR Value 0.001
SYMBOL res -4048 480 R0
SYMATTR InstName R10
SYMATTR Value 0.001
SYMBOL cap -4112 272 R0
SYMATTR InstName C1
SYMATTR Value 1
SYMBOL res -4160 96 M0
SYMATTR InstName R1
SYMATTR Value 0.001
SYMBOL res -4048 96 R0
SYMATTR InstName R2
SYMATTR Value 0.001
SYMBOL cap -4112 -112 R0
SYMATTR InstName C2
SYMATTR Value 1
SYMBOL res -4160 -288 M0
SYMATTR InstName R3
SYMATTR Value 0.001
SYMBOL res -4048 -288 R0
SYMATTR InstName R11
SYMATTR Value 0.001
SYMBOL npn -32 576 M270
SYMATTR InstName Q1
SYMATTR Value 2N2222
SYMBOL OpAmps\\OP727 -1200 1520 R0
SYMATTR InstName U1
SYMBOL OpAmps\\OP727 -528 1504 R0
SYMATTR InstName U2
SYMBOL res -96 608 R0
SYMATTR InstName R12
SYMATTR Value 1k
SYMBOL res -624 1568 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 100k
SYMBOL res -624 1472 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 100k
SYMBOL res -592 1712 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL res -576 1440 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R16
SYMATTR Value 10k
SYMBOL res -976 1232 R0
SYMATTR InstName R17
SYMATTR Value 10k
SYMBOL res -976 1344 R0
SYMATTR InstName R18
SYMATTR Value 100k
SYMBOL res -1328 1520 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R19
SYMATTR Value 100k
SYMBOL res -1328 1616 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 100k
SYMBOL res -1296 1616 R0
SYMATTR InstName R21
SYMATTR Value 10k
SYMBOL res -1136 1440 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R22
SYMATTR Value 10k
TEXT -608 584 Left 2 !.tran 0 1.5 0 0.1
TEXT -4496 -504 Left 2 ;BATTERY
TEXT -1152 -280 Left 2 ;Model of Charge Behavior
TEXT -1192 1112 Left 2 ;Charge Current Regulation
TEXT -1248 1336 Left 2 ;Max current setpoint
