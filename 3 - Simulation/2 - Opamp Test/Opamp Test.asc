Version 4
SHEET 1 2224 736
WIRE -2576 -1856 -2576 -1904
WIRE -2544 -1856 -2576 -1856
WIRE -2432 -1856 -2464 -1856
WIRE -2432 -1792 -2432 -1856
WIRE -2352 -1792 -2432 -1792
WIRE -2320 -1792 -2352 -1792
WIRE -2432 -1728 -2432 -1792
WIRE -16 -1728 -1968 -1728
WIRE -2432 -1552 -2432 -1648
WIRE -2432 -1552 -2576 -1552
WIRE -2336 -1552 -2432 -1552
WIRE -2320 -1552 -2336 -1552
WIRE -2576 -1472 -2576 -1552
WIRE -2144 -1424 -2512 -1424
WIRE -1968 -1424 -1968 -1728
WIRE -1968 -1424 -2064 -1424
WIRE -2576 -1248 -2576 -1376
WIRE -1728 -1184 -1840 -1184
WIRE -1584 -1184 -1648 -1184
WIRE -1200 -1184 -1392 -1184
WIRE -1968 -1136 -2128 -1136
WIRE -1840 -1136 -1840 -1184
WIRE -1840 -1136 -1888 -1136
WIRE -1296 -1136 -1312 -1136
WIRE -1680 -1120 -1696 -1120
WIRE -1312 -1104 -1312 -1136
WIRE -1696 -1088 -1696 -1120
WIRE -1392 -1088 -1392 -1184
WIRE -1344 -1088 -1392 -1088
WIRE -1840 -1072 -1840 -1136
WIRE -1728 -1072 -1840 -1072
WIRE -1200 -1072 -1200 -1184
WIRE -1200 -1072 -1280 -1072
WIRE -1040 -1072 -1200 -1072
WIRE -944 -1072 -1040 -1072
WIRE -1584 -1056 -1584 -1184
WIRE -1584 -1056 -1664 -1056
WIRE -1472 -1056 -1584 -1056
WIRE -1344 -1056 -1472 -1056
WIRE -1968 -1040 -2128 -1040
WIRE -1840 -1040 -1888 -1040
WIRE -1728 -1040 -1840 -1040
WIRE -496 -1024 -640 -1024
WIRE -320 -1024 -432 -1024
WIRE -1312 -1008 -1312 -1040
WIRE -1840 -960 -1840 -1040
WIRE -1808 -960 -1840 -960
WIRE -1696 -960 -1696 -1024
WIRE -1696 -960 -1728 -960
WIRE -1696 -912 -1696 -960
WIRE -640 -912 -640 -1024
WIRE -496 -912 -640 -912
WIRE -320 -912 -320 -1024
WIRE -320 -912 -416 -912
WIRE -944 -832 -944 -1072
WIRE -816 -832 -944 -832
WIRE -640 -832 -640 -912
WIRE -640 -832 -736 -832
WIRE -448 -832 -464 -832
WIRE -464 -800 -464 -832
WIRE -640 -784 -640 -832
WIRE -496 -784 -640 -784
WIRE -320 -768 -320 -912
WIRE -320 -768 -432 -768
WIRE -112 -768 -320 -768
WIRE -16 -768 -16 -1728
WIRE -16 -768 -112 -768
WIRE -816 -752 -928 -752
WIRE -656 -752 -736 -752
WIRE -496 -752 -656 -752
WIRE -656 -720 -656 -752
WIRE -464 -704 -464 -736
WIRE -1696 -608 -1696 -640
WIRE -1696 -608 -1808 -608
WIRE -1568 -608 -1696 -608
WIRE -656 -608 -656 -640
WIRE -1200 -512 -1392 -512
WIRE -1568 -496 -1568 -608
WIRE -1296 -464 -1312 -464
WIRE -1808 -448 -1808 -608
WIRE -1312 -432 -1312 -464
WIRE -1392 -416 -1392 -512
WIRE -1344 -416 -1392 -416
WIRE -1200 -400 -1200 -512
WIRE -1200 -400 -1280 -400
WIRE -1088 -400 -1200 -400
WIRE -928 -400 -928 -752
WIRE -928 -400 -1088 -400
WIRE -1568 -384 -1568 -416
WIRE -1344 -384 -1568 -384
WIRE -1568 -336 -1568 -384
WIRE -1312 -336 -1312 -368
WIRE -1808 -192 -1808 -368
WIRE -1696 -192 -1808 -192
WIRE -1568 -192 -1568 -256
WIRE -1568 -192 -1696 -192
WIRE -1696 -144 -1696 -192
FLAG -1680 -1120 PWR
FLAG -1696 -912 0
FLAG -1696 -640 PWR
FLAG -1696 -144 0
FLAG -1296 -464 PWR
FLAG -1312 -336 0
FLAG -448 -832 PWR
FLAG -464 -704 0
FLAG -2128 -1040 SNS+
FLAG -2128 -1136 SNS-
FLAG -1088 -400 CHG_LIM
FLAG -1472 -1056 CUR_SNS
FLAG -1296 -1136 PWR
FLAG -1312 -1008 0
FLAG -1040 -1072 CUR_SNS_DRV
FLAG -112 -768 ERROR
FLAG -656 -608 0
FLAG -2576 -1904 PWR
FLAG -2576 -1248 0
FLAG -2352 -1792 SNS+
FLAG -2336 -1552 SNS-
SYMBOL OpAmps\\OP777 -1696 -1120 R0
SYMATTR InstName U3
SYMBOL voltage -1808 -464 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 12V
SYMBOL OpAmps\\OP777 -1312 -464 R0
SYMATTR InstName U1
SYMBOL OpAmps\\OP777 -464 -832 R0
SYMATTR InstName U2
SYMBOL res -1712 -976 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL res -1872 -1056 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res -1632 -1200 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res -1872 -1152 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res -1584 -512 R0
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res -1584 -352 R0
SYMATTR InstName R6
SYMATTR Value 12k
SYMBOL OpAmps\\OP777 -1312 -1136 R0
SYMATTR InstName U5
SYMBOL res -720 -768 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL res -640 -624 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL res -832 -816 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL res -512 -896 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R10
SYMATTR Value 10k
SYMBOL res -2448 -1744 R0
SYMATTR InstName R11
SYMATTR Value 1
SYMBOL npn -2512 -1472 M0
SYMATTR InstName Q1
SYMATTR Value 2N3904
SYMBOL res -2048 -1440 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 100
SYMBOL voltage -2448 -1856 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 31 171 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 24 0 0.03 0.03 0.09 0.18 1)
SYMBOL cap -432 -1040 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 10µ
TEXT -2782 -120 Left 2 !.tran 0 0.1 0 0.01
